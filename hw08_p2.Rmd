---
title: "HW08, pt 2:"
author: "Julia Du"
date: "`r lubridate::today()`"
output: 
  github_document:
    toc: true
---

## Load necessary libraries

```{r, message = FALSE}
library(tidyverse)
library(stringr)
library(jsonlite)
library(httr)

library(rvest)

nyt_api <- getOption("nyt_semantics_key")
guardian_api <- getOption("guardian_key")

theme_set(theme_minimal())
```

keep in mind you'll need to have your own API key for both NYT (Semantics API) & Guardian API. store it in .Rprofile w/ format of options(keyname = "actualkeycode").

## Overview
compare coverage of BLM this past yr geographically?

track coverage of gay marriage over time? since maybe 2000?

reference: https://open-platform.theguardian.com/documentation/tag

```{r}
guard_equal <- GET(
  url = "https://content.guardianapis.com/search?", 
  query = list(q = "equal marriage", 
               api-key = guardian_api)
  )


content(guard_equal, as = "parsed", type = "application/json") %>% 
  as_tibble()

guard_equal 
```

## 

```{r}
nyt_equal <- GET(
  url = "http://api.nytimes.com/svc/semantic/v2/concept", 
  query = list(nytd_per = "Trump, Donald", 
               api-key = nyt_api)
  )

```


```{r}

```

## pivot to scraping lol
```{r}
# use SelectorGadget
pterry <- read_html("https://www.goodreads.com/author/show/1654.Terry_Pratchett")

pterry_quotes <- read_html("https://www.goodreads.com/author/quotes/1654.Terry_Pratchett")

quotes <- html_nodes(pterry_quotes, ".quoteText")

html_text(quotes) %>%
  str_trim(side = "both")


quotes1 <-html_nodes(pterry_quotes, ".authorOrTitle")

html_text(quotes1) %>%
  str_trim(side = "both")

pterry_tags <- html_nodes(pterry_quotes, ".left")

pterry_tags %>%
  html_text() %>%
  str_trim(side = "both")



```


```{r sad}
randomquotes <- read_html("http://quotes.toscrape.com/")

randomquotes_nodes <- html_nodes(randomquotes, ".tags , .text")

randomquotes_nodes %>%
  html_text()
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
